pipeline {
    agent any

    stages {
        stage('SCM') {
            steps {
               git 'https://github.com/DeepakPrakasam/Maven.git'
            }
        }
        stage('Build'){
            steps{
                bat 'mvn clean install'
            }
        }
        stage('build to images'){
            steps{
                script{
                    bat 'docker build -t deepakp2003/simplewebapp .'
                }
            }
            
        }
        stage('docker push hub'){
            steps{
                script{
                    // This step should not normally be used in your script. Consult the inline help for details.
                    withDockerRegistry(credentialsId: 'Dockercred', url: ' https://index.docker.io/v1/') {
                    bat 'docker push deepakp2003/simplewebapp'
                    }
                }
            }
        }
    }
}
